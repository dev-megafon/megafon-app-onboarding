---
order: 2
title: Параметры запроса
---

{% table %}

---

*  {% colwidth=[122] isHeader=true %}

   Название

*  {% isHeader=true %}

   Тип

*  {% colwidth=[136] isHeader=true %}

   Обязательный

*  {% colwidth=[123] isHeader=true %}

   Допустимые значения

*  {% isHeader=true %}

   Описание

---

*  {% colwidth=[122] isHeader=true %}

   access_token

*  string

*  {% colwidth=[136] %}

   Да

*  {% colwidth=[123] %}

   \-

*  Ключ сессии аутентификации.

---

*  {% colwidth=[122] isHeader=true %}

   first_call

*  string

*  {% colwidth=[136] %}

   да

*  {% colwidth=[123] %}

   contact, employee

*  Определяет номер, на который необходимо дозвониться в первую очередь:

   `- employee —` сотрудник;

   `- contact `-- вызываемая сторона (обычно клиент).

---

*  {% colwidth=[122] isHeader=true %}

   switch_at_once

*  boolean

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   true, false

*  Значение по умолчанию: `false`.

   Если параметр` first_call` имеет значение employee, и заданы параметры `employee_message` и `contact_message`, то:

   \- Первый звонок совершается сотруднику, указанному в параметре `employee`.

   \- Сотрудник после поднятия трубки слушает сообщение до конца, и только после этого совершается звонок абоненту, указанному в параметре `contact.`

   \- Во время дозвона до абонента из параметра contact сотрудник слушает сообщение, заданное в параметре `media_file_id`.

   \- После ответа абонента из параметра `contact` начинается разговор с сотрудником из параметра `employee`, если параметр `switch_at_once` имеет значение true.

   \- Если параметр `switch_at_once `имеет значение `false`, абонент из параметра contact дослушает сообщение до конца, а затем состоится разговор с сотрудником из параметра employee.

   Если параметр` first_call` имеет значение `contact`, и заданы параметры c`ontact_message `и `employee_message`, то:

   \- В первую очередь звонок совершается абоненту, указанному в параметре `contact`.

   \- Абонент из параметра `contact `после поднятия трубки начинает слушать сообщение, в то время как звонок на сотрудника из параметра` employee` уже осуществляется.

   \- После поднятия трубки сотрудником из параметра `employee` проигрывание сообщения будет прервано для абонента из параметра contact, и далее состоится разговор, если параметр `switch_at_once `имеет значение `true`.

   \- Если параметр `switch_at_once` имеет значение `false`, сообщение будет проиграно до конца обоим участникам, после чего начнется разговор.

   \- Если проигрывание сообщения у кого-то завершилось раньше, он будет слушать сообщение, заданное в параметре `media_file_id`.

   Если в параметре `contact_message `тип имеет значение `tts`, то параметр `switch_at_once = true` не будет работать.

---

*  {% colwidth=[122] isHeader=true %}

   early_switching

*  boolean

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   true, false

*  Значение по умолчанию: `false`.

   Если параметр `early_switching `имеет значение true, то сотрудник при дозвоне до абонента будет слышать происходящее на абонентской линии. Например, если оператор ожидает дозвона до абонента, а тот недоступен и у него сработала голосовая почта, при активации параметра early_switching = true оператор сможет услышать сообщение о голосовой почте абонента. Если параметр `early_switching = false`, оператор будет слушать музыку, заданную в параметре `media_file_id`.

   Параметр `early_switching` может иметь значение `true` только в том случае, если параметр `first_call` имеет значение `employee`, а параметр `switch_at_once` установлен в `true`. В противном случае возникнет ошибка: `-32602 invalid_parameters_combination The combination of parameters is not permitted` (см. раздел ["Коды ошибок Call API](./../../vozvraschaemye-oshibki-sall-api)").

---

*  {% colwidth=[122] isHeader=true %}

   media_file_id

*  number

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   

*  **Значение по умолчанию:** системная мелодия «Музыка переадресации» (`dialing_music`).

   Этот параметр задает идентификатор звукового файла для музыки переадресации. Файл может быть как системным, так и пользовательским.

   Музыка переадресации проигрывается всегда тому плечу, для которого не задан один из параметров `contact_message `или `employee_message`.

   **Примечание:** Получить список доступных системных или пользовательских файлов можно с помощью DATA API, воспользовавшись методами «Получение списка пользовательских файлов» и «Получение списка системных файлов».

---

*  {% colwidth=[122] isHeader=true %}

   virtual_phone_number

*  string

*  {% colwidth=[136] %}

   Да

*  {% colwidth=[123] %}

   

*  Виртуальный номер: арендуемый клиентом номер, который должен соответствовать международному стандарту E.164 (например, 74993720692).

   Этот номер всегда используется в качестве номера звонящего при звонке на номер, указанный в параметре contact. Также он используется в качестве номера звонящего при звонке на номер, указанный в параметре employee, если параметр `show_virtual_phone_number` имеет значение `true`.

   **Примечание:** Виртуальные номера можно получить с помощью DATA API, воспользовавшись методом «Получение списка виртуальных номеров».

---

*  {% colwidth=[122] isHeader=true %}

   show_virtual_phone_number

*  boolean

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   true, false

*  Параметр `show_virtual_phone_number`: значение по умолчанию -- `true`.

   Этот параметр определяет, следует ли показывать виртуальный номер, заданный в параметре `virtual_phone_number`, в качестве номера звонящего абонента для сотрудника, указанного в параметре `employee`.

---

*  {% colwidth=[122] isHeader=true %}

   contact

*  string

*  {% colwidth=[136] %}

   да

*  {% colwidth=[123] %}

   

*  Номер абонента, на который совершается вызов: номер должен соответствовать международному стандарту E.164 (например, +79091234567).

   **Внимание!** Внутренние номера сотрудников не поддерживаются.

---

*  {% colwidth=[122] isHeader=true %}

   external_id

*  string

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   

*  Уникальный идентификатор: используется для связывания события звонка с внешней системой.

---

*  {% colwidth=[122] isHeader=true %}

   dtmf_string

*  string

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   0-9, \*, #

*  Задает DTMF, который будет отправлен абоненту, указанному в параметре `contact. `С помощью символа . (который обозначает '1 секунду') можно задать таймаут, по истечении которого будет отправлен символ DTMF.

   **Пример:**

   12\.1..4, что означает, что через 1 секунду будет отправлена цифра 12, затем через 1 секунду -- цифра 1, и через 2 секунды -- цифра 4.

---

*  {% colwidth=[122] isHeader=true %}

   direction

*  string

*  {% colwidth=[136] %}

   нет

*  {% colwidth=[123] %}

   in, out

*  Значение по умолчанию: `in`.

   Определяет направление звонка:

   \- `in` -- Входящий звонок,

   \- `out `-- Исходящий звонок.

{% /table %}

### Сотрудник, с которым будет соединен абонент из параметра contact

{% table %}

---

*  {% colspan=2 colwidth=[0,48] isHeader=true %}

   Название

*  {% colwidth=[85] isHeader=true %}

   Тип

*  {% colwidth=[136] isHeader=true %}

   Обязательный

*  {% colwidth=[127] isHeader=true %}

   Допустимые значения

*  {% isHeader=true %}

   Описание

---

*  {% colspan=2 colwidth=[0,48] %}

   employee

*  {% colwidth=[85] %}

   object

*  {% colwidth=[136] %}

   Да

*  {% colwidth=[127] %}

   

*  Сотрудник, с которым будет соединён абонент, указанный в параметре `contact`.

---

*  

*  {% colwidth=[48] %}

   id

*  {% colwidth=[85] %}

   number

*  {% colwidth=[136] %}

   да

*  {% colwidth=[127] %}

   

*  Уникальный идентификатор сотрудника.

   **Примечание:** Этот идентификатор можно получить с помощью DATA API -- получения информации о сотруднике.

{% /table %}

### Сообщение для проигрывания абоненту, который задан в параметре contact

{% table %}

---

*  {% colspan=2 colwidth=[153,62] isHeader=true %}

   Название

*  {% colwidth=[72] isHeader=true %}

   Тип

*  {% colwidth=[142] isHeader=true %}

   Обязательный

*  {% colwidth=[127] isHeader=true %}

   Допустимые значения

*  {% isHeader=true %}

   Описание

---

*  {% colspan=2 colwidth=[153,62] isHeader=true %}

   contact_message

*  {% colwidth=[72] %}

   object

*  {% colwidth=[142] %}

   нет

*  {% colwidth=[127] %}

   

*  Определяет параметры сообщения, которое необходимо проиграть абоненту, указанному в параметре `contact`. После окончания проигрывания сообщения будет повторяться сообщение из параметра `media_file_id.`

---

*  {% colwidth=[153] isHeader=true %}

   

*  {% colwidth=[62] %}

   type

*  {% colwidth=[72] %}

   string

*  {% colwidth=[142] %}

   да

*  {% colwidth=[127] %}

   media, tts

*  Определяет тип сообщения: `media` -- файл или `tts `-- текст для услуги синтеза речи (Text-to-Speech).

---

*  {% colwidth=[153] isHeader=true %}

   

*  {% colwidth=[62] %}

   value

*  {% colwidth=[72] %}

   string

*  {% colwidth=[142] %}

   да

*  {% colwidth=[127] %}

   

*  Если поле`type`имеет значение `media`, то в качестве значения принимается идентификатор файла для проигрывания. Файл может быть как системным, так и пользовательским.

   Если поле type имеет значение` tts`, то в качестве значения принимается текст, который будет синтезирован в голосовое сообщение.

   **Примечание:** Идентификатор файла можно получить с помощью DATA API -- через методы «Получение списка пользовательских файлов» и «Получение списка системных файлов».

{% /table %}

### Сообщение для проигрывания абоненту, который задан в параметре `employee`

{% table %}

---

*  {% colspan=2 isHeader=true %}

   Название

*  {% colwidth=[70] isHeader=true %}

   Тип

*  {% colwidth=[142] isHeader=true %}

   Обязательный

*  {% colwidth=[127] isHeader=true %}

   Допустимые значения

*  {% isHeader=true %}

   Описание

---

*  {% colspan=2 isHeader=true %}

   employee_message

*  {% colwidth=[70] %}

   object

*  {% colwidth=[142] %}

   нет

*  {% colwidth=[127] %}

   

*  Определяет параметры сообщения, которое необходимо проиграть абоненту, указанному в параметре `employee`. После окончания проигрывания сообщения будет  повторяться сообщение из параметра `media_file_id`.

---

*  {% isHeader=true %}

   

*  type

*  {% colwidth=[70] %}

   string

*  {% colwidth=[142] %}

   да

*  {% colwidth=[127] %}

   media, tts

*  Определяет тип сообщения: `media` -- файл или `tts `-- текст для услуги синтеза речи (Text-to-Speech).

---

*  {% isHeader=true %}

   

*  value

*  {% colwidth=[70] %}

   string

*  {% colwidth=[142] %}

   да

*  {% colwidth=[127] %}

   

*  Если поле `type` имеет значение `media`, то в качестве значения принимается идентификатор файла для проигрывания. Файл может быть как системным, так и пользовательским.

   **Примечание:**

   Идентификатор файла для проигрывания можно получить с помощью DATA API: «Получение списка пользовательских файлов» и «Получение списка системных файлов».

   Если поле type имеет значение` tts`, то в качестве значения принимается текст для синтезирования в голосовое сообщение.

   **Внимание!** Длина TTS-сообщения регулируется тарифным планом и установленным лимитом.

{% /table %}
